(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-481ff16d"],{"0d61":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{ref:"dragDiv",staticClass:"drag"},[s("div",{staticClass:"drag_bg"}),s("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),s("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){return e.mousedownFn(t)}}})])},o=[],i={data:function(){return{beginClientX:0,mouseMoveState:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},methods:{mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveState=!0,this.beginClientX=e.clientX)},successFunction:function(){this.confirmSuccess=!0,this.confirmWords="验证通过",this.$emit("check-result",this.confirmSuccess),window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",(function(){})),document.getElementsByClassName("drag_text")[0].style.color="#fff",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px"},mouseMoveFn:function(e){if(this.mouseMoveState){var t=e.clientX-this.beginClientX;t>0&&t<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=t+"px",document.getElementsByClassName("drag_bg")[0].style.width=t+"px"):t>this.maxwidth&&this.successFunction()}},moseUpFn:function(e){this.mouseMoveState=!1;var t=e.clientX-this.beginClientX;t<this.maxwidth&&(document.getElementsByClassName("handler")[0].style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}},mounted:function(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)}},a=i,r=(s("25ca"),s("2877")),l=Object(r["a"])(a,n,o,!1,null,"876eac50",null);t["a"]=l.exports},"25ca":function(e,t,s){"use strict";var n=s("dce3"),o=s.n(n);o.a},3936:function(e,t,s){"use strict";var n=s("da82"),o=s.n(n);o.a},a55b:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"login"}},[s("el-container",[s("el-header",[s("h1",{staticStyle:{color:"#FFFFFF","margin-top":"50px"}},[e._v("Python在线考试系统")])]),s("el-main",[s("div",{attrs:{id:"login-from"}},[s("el-form",{ref:"loginForm",attrs:{"status-icon":"",model:e.loginForm,rules:e.rules}},[s("el-form-item",{attrs:{label:"学号",prop:"username"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",t)},expression:"loginForm.username"}})],1),s("el-form-item",{attrs:{label:"密码",prop:"password"}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),s("slide-verification",{on:{"check-result":e.checkResult}}),s("br"),s("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.handLogin("loginForm")}}},[e._v("登录")]),s("div",{staticClass:"text-foot"},[e._v(" 还没有账号? "),s("router-link",{staticClass:"register-link",attrs:{to:"/register"}},[e._v(" 注册 ")])],1)],1)],1)])],1)],1)},o=[],i=s("0d61"),a={data:function(){return{confirmSuccess:!1,loginForm:{username:null,password:null},rules:{username:[{required:!0,message:"请输入学号",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},components:{SlideVerification:i["a"]},methods:{checkResult:function(e){this.confirmSuccess=e},handLogin:function(e){var t=this;if(localStorage.clear(),sessionStorage.clear(),this.confirmSuccess){var s=this;this.$refs[e].validate((function(e){e&&axios.post("api/jwt-auth/",t.loginForm).then((function(e){console.log(e),200==e.status&&(t.$message({message:"登录成功",type:"success"}),t.$store.commit("setUser",e.data.user),t.$store.commit("setStudent",e.data.student),t.$store.commit("setAuthorization",e.data.token),t.$router.push("/exam"))})).catch((function(e){s.$message("登录失败，账号或密码错误"),console.log(e)}))}))}else this.$message("请拖动滑块进行验证！")}}},r=a,l=(s("3936"),s("2877")),c=Object(l["a"])(r,n,o,!1,null,"2d90525d",null);t["default"]=c.exports},da82:function(e,t,s){},dce3:function(e,t,s){}}]);
//# sourceMappingURL=chunk-481ff16d.820898f5.js.map